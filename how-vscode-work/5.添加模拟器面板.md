#### 一、增加part
1、增加src/vs/workbench/browser/parts/simulator
simulatorPart.ts
```ts
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

import './media/simulatorpart.css';
import { Part } from '../../part.js';
import { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';
import { IWorkbenchLayoutService, Parts } from '../../../services/layout/browser/layoutService.js';
import { IStorageService } from '../../../../platform/storage/common/storage.js';
import { IThemeService } from '../../../../platform/theme/common/themeService.js';
import { ISimulatorService } from '../../../services/simulator/browser/simulatorService.js';
import { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';
import { ACTIVITY_BAR_BACKGROUND } from '../../../common/theme.js';


export class SimulatorPart extends Part implements ISimulatorService {
	declare readonly _serviceBrand: undefined;

	readonly minimumWidth: number = 100;
	readonly maximumWidth: number = Number.POSITIVE_INFINITY;
	readonly minimumHeight: number = 77;
	readonly maximumHeight: number = Number.POSITIVE_INFINITY;

	constructor(
		@IStorageService storageService: IStorageService,
		@IThemeService themeService: IThemeService,
		@IWorkbenchLayoutService layoutService: IWorkbenchLayoutService,
		@IInstantiationService instantiationService: IInstantiationService
	) {
		super(
			Parts.SIMULATOR_PART,
			{ hasTitle: false },
			themeService,
			storageService,
			layoutService
		);
	}

	protected override createContentArea(parent: HTMLElement): HTMLElement {
		this.element = parent;
		const content = document.createElement('div');
		content.innerText = '模拟器';
		// addClass(content, 'simulator-wrapper');
		this.element.appendChild(content);

		return this.element;
	}

	override updateStyles(): void {
		super.updateStyles();

		const container = this.getContainer();
		container!.style.backgroundColor = this.getColor(ACTIVITY_BAR_BACKGROUND) as string;
	}

	override layout(width: number, height: number): void {
		super.layoutContents(width, height);
	}

	toJSON(): object {
		return {
			type: Parts.SIMULATOR_PART
		};
	}
}

registerSingleton(ISimulatorService, SimulatorPart, InstantiationType.Eager);
```

2、添加服务src/vs/workbench/services/simulator
simulatorService.ts
```ts
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
import { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';

export const ISimulatorService = createDecorator<ISimulatorService>(
	'simualtorService'
);

export interface ISimulatorService {
	readonly _serviceBrand: undefined;
}
```

3、注册服务
src/vs/workbench/workbench.common.main.ts
```ts
import './browser/parts/simulator/simulatorPart.js';
```

4、修改layout.ts
src/vs/workbench/browser/layout.ts
```ts
// 定义视图
private simulatorPartView!: ISerializableView;

// 定义服务
private simulatorService!: ISimulatorService;

// 获取服务
this.simulatorService = accessor.get(ISimulatorService);

// 增加为候选part
partCandidate = this.getPart(Parts.SIDEBAR_PART).getContainer();

// 获取part, 赋值视图
const simulator = this.getPart(Parts.SIMULATOR_PART);
this.simulatorPartView = simulator;


// 增加视图映射
[Parts.SIMULATOR_PART]: this.simulatorPartView,

// 获取宽度, 用于计算中间容器
const simulatorSize = this.simulatorPartView.minimumWidth;

// 计算编辑器宽度
const editorSectionWidth = availableWidth - activityBarSize - simulatorSize - (sideBarNextToEditor ? 0 : sideBarSize) - (auxiliaryBarNextToEditor ? 0 : auxiliaryBarSize);
result.push({
	type: 'branch',
	data: [this.arrangeEditorNodes({
		editor: nodes.editor,
		sideBar: sideBarNextToEditor ? nodes.sideBar : undefined,
		auxiliaryBar: auxiliaryBarNextToEditor ? nodes.auxiliaryBar : undefined,
	}, availableHeight - panelSize, editorSectionWidth), nodes.panel],
	size: editorSectionWidth
});

// 添加simulator part
result.push(nodes.simulator);

// Todo visiable
const simulatorNode: ISerializedLeafNode = {
	type: 'leaf',
	data: { type: Parts.SIMULATOR_PART },
	size: simulatorSize,
	visible: true
};


const middleSection: ISerializedNode[] = this.arrangeMiddleSectionNodes({
	activityBar: activityBarNode,
	auxiliaryBar: auxiliaryBarNode,
	editor: editorNode,
	panel: panelNode,
	sideBar: sideBarNode,
	simulator: simulatorNode,
}, width, middleSectionHeight);
```
